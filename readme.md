# Json Parser

The package contains various json parser implementations mainly for the education purpose.

I wanted to study how to implement a custom parser (mainly using recursive descendant approach) checking if there are any benefits from using TypedArrays (like Uint8Array) to represent the input.

## Hypotheses

1. TypedArrays show better time performance.
2. Avoiding type conversion for the number parsing shows better time.
3. Class-based implementation can be slightly better than the function-based one.

## Results

The benchmarks are generated by [mitata](https://github.com/evanwashere/mitata) package.

```sh
clk: ~3.23 GHz
cpu: Apple M2
runtime: node 22.9.0 (arm64-darwin)

benchmark                   avg (min … max) p75 / p99    (min … top 1%)
------------------------------------------- -------------------------------
douglas crockford rdp 800kb    8.77 ms/iter   8.83 ms           ▂     █
                        (8.64 ms … 8.88 ms)   8.88 ms ▃▅▂▅█▆▅▄▂▅█▂▄▆███▅▃▃▄
                  gc(  1.83 ms …   3.29 ms)   8.54 mb (  8.54 mb…  8.65 mb)

douglas crockford eval 800kb   7.68 ms/iter   8.22 ms █▇
                       (6.93 ms … 12.91 ms)  12.79 ms ██▁▂▅▄▅▂▁▁▁▁▁▁▁▁▁▁▁▁▁
                  gc(  1.23 ms …   4.59 ms)   7.95 mb (  7.90 mb…  8.95 mb)

native 800kb                   2.13 ms/iter   2.21 ms  ▇      ▄█
                        (1.90 ms … 2.56 ms)   2.53 ms ▇█▆▄▄▅▅▇███▃▅▁▅▂▂▁▂▂▁
                  gc(  1.83 ms …   4.14 ms)   1.12 mb (  1.12 mb…  1.12 mb)

rdp 800kb                      8.72 ms/iter   8.78 ms              ▂█▄
                        (8.44 ms … 8.93 ms)   8.90 ms ▃▁▃▂▁▃▃▂▃▃▁▄▇███▇▄▁▁▂
                  gc(  2.69 ms …   4.58 ms)   7.12 mb (  7.12 mb…  7.22 mb)

rdp regex 800kb               15.29 ms/iter  15.39 ms  ▃▃        █ █▆█▆▃
                      (15.05 ms … 15.51 ms)  15.49 ms ▆███▆▄▄▄▁▄▄████████▄▄
                  gc(  2.82 ms …   4.97 ms)  10.21 mb ( 10.17 mb… 10.25 mb)

typed rdp 800kb                8.09 ms/iter   8.64 ms   █
                        (7.29 ms … 8.92 ms)   8.91 ms ▃▆█▇▂▁▁▁▃▃▃▄▃▃▃▆▆▅▇▇▃
                  gc(  2.72 ms …   4.68 ms)   9.34 mb (  9.34 mb…  9.40 mb)

typed rdp 2 800kb              5.98 ms/iter   5.97 ms   ▇█
                        (5.77 ms … 7.04 ms)   6.94 ms ▃███▅▃▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁
                  gc(  2.72 ms …   6.35 ms)   6.73 mb (  6.73 mb…  6.85 mb)

typed rdp class 800kb          9.86 ms/iter   9.93 ms     ▄ ▆█
                       (9.45 ms … 10.78 ms)  10.72 ms ▄▂▅▅█▇███▄▆▂▁▁▂▁▂▁▁▁▂
                  gc(  2.74 ms …   4.54 ms)   9.47 mb (  9.26 mb… 10.03 mb)
```

## Appendix

- [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)
