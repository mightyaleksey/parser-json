# Json Parser

The package contains various json parser implementations mainly for the education purpose.

I wanted to study how to implement a custom parser (mainly using recursive descendant approach) checking if there are any benefits from using TypedArrays (like Uint8Array) to represent the input.


## Hypotheses

1. TypedArrays show better time performance.
2. Avoiding type conversion for the number parsing shows better time.
3. Class-based implementation can be slightly better than the function-based one.


## Results

The benchmarks are generated by [mitata](https://github.com/evanwashere/mitata) package.

```sh
clk: ~3.11 GHz
cpu: Apple M2
runtime: node 22.9.0 (arm64-darwin)

benchmark                   avg (min … max) p75 / p99    (min … top 1%)
------------------------------------------- -------------------------------
douglas crockford rdp 900kb    8.66 ms/iter   8.72 ms     ▅         █▂▃
                        (8.51 ms … 8.85 ms)   8.79 ms ▃▂▃███▆▅▆▄▅▂▆▂███▃▅▄▄
                  gc(  1.74 ms …   3.30 ms)   8.54 mb (  8.54 mb…  8.57 mb)

douglas crockford eval 900kb   7.64 ms/iter   7.48 ms █▆
                       (7.19 ms … 13.11 ms)  13.06 ms ██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▂
                  gc(  1.21 ms …   3.13 ms)   8.39 mb (  8.33 mb…  9.38 mb)

native 900kb                   2.16 ms/iter   2.27 ms   ▅               ▄█
                        (1.92 ms … 2.30 ms)   2.28 ms ▁▂█▇▂▁▁▁▁▁▁▁▁▁▁▁▁▆██▆
                  gc(  2.03 ms …   4.06 ms)   1.12 mb (  1.12 mb…  1.12 mb)

rdp 900kb                      9.51 ms/iter   9.57 ms                  █▇
                        (9.18 ms … 9.62 ms)   9.62 ms ▂▁▄▂▁▂▁▁▁▂▂▂▂▂▃▄▆██▄▂
                  gc(  2.97 ms …   4.61 ms)   7.12 mb (  7.12 mb…  7.22 mb)

rdp regex 900kb               17.65 ms/iter  17.70 ms               █▅
                      (17.30 ms … 17.86 ms)  17.84 ms ▂▃▂▂▂▁▂▁▁▂▂▄▆███▂▃▃▃▂
                  gc(  3.03 ms …   4.49 ms)  15.53 mb ( 15.47 mb… 15.58 mb)

typed rdp 900kb                7.90 ms/iter   7.92 ms            ▄▃█
                        (7.74 ms … 8.02 ms)   8.01 ms ▄▁▁▂▂▂▂▂▂█▇████▅▄▃▂▂▃
                  gc(  2.95 ms …   4.76 ms)   9.34 mb (  9.34 mb…  9.92 mb)

typed rdp 2 900kb              6.51 ms/iter   6.54 ms               █▃▆
                        (6.31 ms … 6.62 ms)   6.60 ms ▂▁▂▂▃▃▂▂▂▆▂▆▃▆███▆▇▂▃
                  gc(  2.90 ms …   4.53 ms)   6.73 mb (  6.54 mb…  7.13 mb)

typed rdp class 900kb         10.12 ms/iter  10.21 ms      ▂ ▂▆ █▄ ▄▂
                       (9.87 ms … 10.39 ms)  10.39 ms █▅▇▃██▅████████▇▃▅▅▃▅
                  gc(  3.10 ms …   4.74 ms)   9.46 mb (  9.43 mb…  9.48 mb)
```


## Appendix

- [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)
