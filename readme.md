# Json Parser

The package contains various json parser implementations mainly for the education purpose.

I wanted to study how to implement a custom parser (mainly using recursive descendant approach) checking if there are any benefits from using TypedArrays (like Uint8Array) to represent the input.

## Hypotheses

1. TypedArrays show better time performance.
2. Avoiding type conversion for the number parsing shows better time.
3. Class-based implementation can be slightly better than the function-based one.

## Results

The benchmarks are generated by [mitata](https://github.com/evanwashere/mitata) package.

```sh
clk: ~3.25 GHz
cpu: Apple M2
runtime: node 22.9.0 (arm64-darwin)

benchmark                   avg (min … max) p75 / p99    (min … top 1%)
------------------------------------------- -------------------------------
douglas crockford rdp 800kb    8.85 ms/iter   8.90 ms                ▂▄▇█
                        (8.70 ms … 8.95 ms)   8.93 ms ▄▂█▆▃▇▂▁▄▂▁▄▄▃▇████▇▅
                  gc(  1.75 ms …   3.22 ms)   8.54 mb (  8.54 mb…  8.65 mb)

douglas crockford eval 800kb   7.18 ms/iter   7.02 ms █▅
                       (6.74 ms … 12.56 ms)  12.43 ms ██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁
                  gc(  1.21 ms …   2.82 ms)   7.96 mb (  7.90 mb…  8.95 mb)

native 800kb                   2.13 ms/iter   2.21 ms                   █▇
                        (1.83 ms … 2.24 ms)   2.24 ms ▁▁▂█▄▁▁▁▁▁▁▁▁▁▁▁▄███▄
                  gc(  2.04 ms …   4.60 ms)   1.12 mb (  1.12 mb…  1.12 mb)

rdp 800kb                      9.27 ms/iter   9.30 ms                  ▂█
                        (8.97 ms … 9.35 ms)   9.34 ms ▂▂▁▁▁▁▁▁▁▁▁▁▁▁▁▃▆██▆▂
                  gc(  2.96 ms …   5.18 ms)   7.12 mb (  7.12 mb…  7.21 mb)

rdp regex 800kb               15.20 ms/iter  15.23 ms             ▄█▆▄
                      (14.92 ms … 15.34 ms)  15.34 ms ▂▁▁▁▁▁▁▁▂▁▇▄████▅▆▂▁▄
                  gc(  3.04 ms …   4.37 ms)  10.22 mb ( 10.17 mb… 10.30 mb)

typed rdp 800kb                7.31 ms/iter   7.35 ms          ▂▆█
                        (7.13 ms … 7.50 ms)   7.49 ms ▃▄▄▄▃▁▃▁▃███▅█▇▄▃▁▁▄▂
                  gc(  2.96 ms …   4.74 ms)   9.34 mb (  9.34 mb…  9.40 mb)

typed rdp 2 800kb              6.03 ms/iter   5.97 ms   █
                       (5.77 ms … 10.70 ms)   7.96 ms ▅▃█▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁
                  gc(  2.97 ms …  16.65 ms)   6.73 mb (  6.73 mb…  6.85 mb)

typed rdp class 800kb          9.98 ms/iter  10.03 ms    █ ▃
                       (9.56 ms … 11.08 ms)  11.00 ms ▄▃▇█▆██▅▃▄▁▃▂▄▁▃▂▂▁▁▂
                  gc(  3.11 ms …   6.58 ms)   9.45 mb (  8.86 mb…  9.92 mb)

typed tokenizer based 800kb   10.26 ms/iter  10.31 ms  ▂▅▇█ ▆
                      (10.05 ms … 11.99 ms)  10.96 ms ▅████▇█▅▂▂▁▁▁▁▁▁▂▁▁▁▂
                  gc(  2.99 ms …   6.83 ms)   9.18 mb (  9.14 mb…  9.62 mb)
```

## Appendix

- [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)
